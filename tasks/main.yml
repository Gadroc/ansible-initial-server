---
# MAIN tasks file for ansible-initial-server

## TODO:
## - check that it works with a default Ubuntu 18.04 ISO server install (probably using 'su' is not needed)
## - ADD script: OpenBSD - generate new SSH host keys on first boot to avoid duplicates in cloned VMs
## - see individual TODOs in files
## - use tags for iserver_is_template
## - use Ansible handlers for restarting services (instaed of restarting inline)
## - improve substitution in SSH config

- name: Initial Setup - Debian, Ubuntu.
  include_tasks: initial-setup-debian-ubuntu.yml
  when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

- name: Initial Setup - OpenBSD.
  include_tasks: initial-setup-openbsd.yml
  when: ansible_distribution == 'OpenBSD'

- name: Initial Setup - Alpine.
  include_tasks: initial-setup-alpine.yml
  when: ansible_distribution == 'Alpine'
